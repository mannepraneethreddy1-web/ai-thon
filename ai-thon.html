import React, { useEffect, useRef, useState } from 'react';
</select>
<button onClick={() => runCode()} className="px-3 py-1 rounded bg-blue-600 text-white">Run</button>
<button onClick={() => { const ex = generateExercise('easy'); setCode(ex.starter); setOutput(ex.description); }} className="px-3 py-1 rounded bg-green-600 text-white">Generate Exercise</button>
<button onClick={() => runTutorialCheck(0)} className="px-3 py-1 rounded bg-indigo-600 text-white">Check Tutorial Step 1</button>
</div>
<div style={{ height: '60vh', borderRadius: 8, overflow: 'hidden' }}>
<Editor
theme="vs-dark"
defaultLanguage={language === 'typescript' ? 'typescript' : language === 'python' ? 'python' : 'javascript'}
value={code}
onChange={(v) => setCode(v || '')}
onMount={(editor, monaco) => { monacoRef.current = { editor, monaco }; }}
/>
</div>
</div>


<aside className="w-1/4">
<div className="mb-4 p-3 border rounded">
<h3 className="font-semibold">Output</h3>
<pre className="text-xs h-40 overflow-auto bg-black text-green-200 p-2 rounded">{output}</pre>
</div>


<div className="mb-4 p-3 border rounded">
<h3 className="font-semibold">Analysis</h3>
<div className="text-xs h-40 overflow-auto">
{analysis.length === 0 && <div className="text-gray-500">No analysis results yet.</div>}
{analysis.map((a, i) => (
<div key={i} className="mb-2 p-1 border-l-2" style={{ borderColor: a.severity === 2 ? '#f87171' : '#fbbf24' }}>
<div className="font-semibold">{a.ruleId || a.type}</div>
<div className="text-xs">{String(a.message || a.reason || a.messageText || a.description)}</div>
{a.suggestion && <div className="text-xs text-blue-600">Suggestion: {a.suggestion}</div>}
</div>
))}
</div>
</div>


<div className="p-3 border rounded">
<h3 className="font-semibold">Tutorial</h3>
<div className="text-xs">
<div className="mb-2">{tutorial.title}</div>
{tutorial.steps.map((s) => (
<div key={s.id} className="mb-1">• {s.text}</div>
))}
</div>
</div>
</aside>
</div>


<footer className="mt-4 text-sm text-gray-500">
<div>Notes:</div>
<ul className="list-disc ml-6">
<li>ESLint and TypeScript transpiler are loaded from CDN builds for in-browser analysis.</li>
<li>Python runs using Pyodide (WebAssembly) for a realistic Python experience client-side.</li>
<li>This demo uses heuristic suggestions — for production, connect to language servers or a dedicated analysis backend (LSP, MyPy, Pyright, etc.).</li>
</ul>
</footer>
</div>
);
}